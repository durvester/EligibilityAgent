# ==============================================================================
# Required Environment Variables
# ==============================================================================

# Anthropic API (for Claude agent)
ANTHROPIC_API_KEY=""

# Stedi Healthcare API (for eligibility checks)
STEDI_API_KEY=""
STEDI_API_URL="https://healthcare.us.stedi.com/2024-04-01"

# ==============================================================================
# EHR OAuth (SMART on FHIR) - Multi-EHR Support
# ==============================================================================
#
# At least ONE EHR's credentials must be fully configured.
# The system uses pattern matching on the FHIR issuer URL to select credentials.
#
# How to add a new EHR:
# 1. Set {PREFIX}_CLIENT_ID, {PREFIX}_CLIENT_SECRET, and {PREFIX}_SCOPES
# 2. The prefix is defined in apps/api/src/services/ehr-credentials.ts
# 3. Restart the application
#
# NO FALLBACKS: If an issuer doesn't match any pattern, the launch will fail
# with a clear error message instead of using wrong credentials.
#

# Practice Fusion OAuth Credentials
# Required if supporting Practice Fusion EHR
# Pattern match: issuer URL contains 'practicefusion.com'
PF_CLIENT_ID=""
PF_CLIENT_SECRET=""
PF_SCOPES="launch openid fhirUser offline_access patient/Patient.read patient/Coverage.read user/Practitioner.read"

# Veradigm OAuth Credentials (optional - only needed when Veradigm EHR connects)
# Required if supporting Veradigm/Allscripts EHR
# Pattern match: issuer URL contains 'allscripts.com'
# Example issuer: https://fhir.fhirpoint.open.allscripts.com/fhirroute/fhir/10552842
VERADIGM_CLIENT_ID=""
VERADIGM_CLIENT_SECRET=""
VERADIGM_SCOPES="launch openid fhirUser offline_access patient/Patient.read patient/Coverage.read"

# Add more EHR systems here following the same pattern:
# {PREFIX}_CLIENT_ID=""
# {PREFIX}_CLIENT_SECRET=""
# {PREFIX}_SCOPES="..."

# ==============================================================================
# Database Configuration (Required)
# ==============================================================================

# PostgreSQL connection string
DATABASE_URL="postgresql://user:password@host:5432/eligibility_agent?schema=public"

# Token encryption key (REQUIRED)
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY=""

# ==============================================================================
# Internal JWT Authentication (Required)
# ==============================================================================

# JWT signing secret (REQUIRED)
# Generate with: openssl rand -base64 64
JWT_SECRET=""

# JWT expiration time (default: 15 minutes)
JWT_EXPIRES_IN="15m"

# ==============================================================================
# Session Cookie Configuration
# ==============================================================================

# Cookie name for session token
SESSION_COOKIE_NAME="eligibility_session"

# Cookie domain (for cross-subdomain cookies)
# Leave empty for localhost development
SESSION_COOKIE_DOMAIN=""

# ==============================================================================
# Upstash Redis (Required - No Fallback)
# ==============================================================================

# Get these from https://upstash.com
UPSTASH_REDIS_URL=""
UPSTASH_REDIS_TOKEN=""

# ==============================================================================
# App URLs (Required)
# ==============================================================================

# Frontend URL (for OAuth redirects)
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Backend API URL (for SSE - must bypass Next.js proxy)
NEXT_PUBLIC_API_URL="http://localhost:3001"

# Backend URL (server-side)
API_URL="http://localhost:3001"

# ==============================================================================
# Optional Configuration
# ==============================================================================

# Environment
NODE_ENV="development"

# CORS (empty = allow all in dev, none in prod)
CORS_ORIGIN=""

# NPI Registry (public API, no auth needed)
NPI_REGISTRY_URL="https://npiregistry.cms.hhs.gov/api"
